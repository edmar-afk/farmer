{% load static tailwind_tags %}
<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta
			name="viewport"
			content="width=device-width, initial-scale=1.0" />
		<title>Dashboard</title>

		{% tailwind_css %}
		<link
			rel="stylesheet"
			href="{% static 'css/style.css' %}" />
		<link
			href="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.3.0/flowbite.min.css"
			rel="stylesheet" />
		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
			integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
			crossorigin="anonymous"
			referrerpolicy="no-referrer" />
	</head>
	<body class="bg">
		{% include 'includes/adminSidebar.html' %}

		<div class="p-4 sm:ml-64">
			<p class="text-center py-4 text-3xl font-bold text-white">Admin's Profile</p>
			<p class="text-white mt-24 mb-2 font-bold text-2xl">System Update</p>
			{% for message in messages %} {% if message.level_tag == 'success' %}
			<p class="text-left text-yellow-400 font-bold mt-4 mb-4 text-md">{{message}}</p>
			{% else %}
			<p class="text-left text-red-400 font-bold mt-4 mb-4 text-md">{{message}}</p>
			{%endif%} {% endfor %}

			<!-- Modal toggle -->
			<button
				data-modal-target="authentication-modal"
				data-modal-toggle="authentication-modal"
				class="block text-white bg-yellow-400 mt-12 focus:ring-4 focus:outline-none focus:ring-yellow-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center"
				type="button">
				<i
					class="fa fa-plus-circle"
					aria-hidden="true"></i>
				Add Pesticides/Fertilizers
			</button>

			<div class="flex flex-row justify-evenly mt-14 flex-wrap">
				{% for list in products %}
				<div class="w-full mb-4 max-w-sm bg-white border border-gray-200 rounded-lg shadow">
					<a href="#">
						<center><img
							class="p-8 rounded-t-lg h-64"
							src="{{list.image.url}}"
							alt="product image" /></center>
					</a>
					<div class="px-5 pb-5">
						<a href="#">
							<h5 class="text-xl font-semibold tracking-tight text-gray-900">
								{{list.name}} -
								<span class="text-sm font-bold text-orange-800">{{list.display}}</span>
							</h5>
						</a>
						<div class="flex items-center mt-2.5 mb-5">
							<p>{{list.description}}</p>
						</div>
						<div class="flex items-center justify-between">
							<span class="text-3xl font-bold text-gray-900">â‚±{{list.price}}</span>
							<a
								href="{% url 'removeProduct' list.id %}"
								class="text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center">
								<i
									class="fa fa-trash"
									aria-hidden="true"></i>
								Remove Product
							</a>
						</div>
					</div>
				</div>
				{% endfor %}
			</div>

			<!-- Main modal -->
			<div
				id="authentication-modal"
				tabindex="-1"
				aria-hidden="true"
				class="hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full">
				<div class="relative p-4 w-full max-w-md max-h-full">
					<!-- Modal content -->
					<div class="relative bg-white rounded-lg shadow">
						<!-- Modal header -->
						<div class="flex items-center justify-between p-4 md:p-5 border-b rounded-t border-gray-600">
							<h3 class="text-xl font-semibold text-gray-900">Add Pesticides/Fertilizer</h3>
							<button
								type="button"
								class="end-2.5 text-gray-400 bg-transparent hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center hover:bg-gray-600"
								data-modal-hide="authentication-modal">
								<svg
									class="w-3 h-3"
									aria-hidden="true"
									xmlns="http://www.w3.org/2000/svg"
									fill="none"
									viewBox="0 0 14 14">
									<path
										stroke="currentColor"
										stroke-linecap="round"
										stroke-linejoin="round"
										stroke-width="2"
										d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6" />
								</svg>
								<span class="sr-only">Close modal</span>
							</button>
						</div>
						<!-- Modal body -->
						<div class="p-4 md:p-5">
							<form
								class="space-y-4"
								action="#"
								method="post"
								enctype="multipart/form-data">
								{% csrf_token %}
								<div>
									<label
										class="block mb-2 text-sm font-medium text-gray-900"
										for="pic">
										Upload file
									</label>
									<input
										class="block w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 dark:text-gray-400 focus:outline-none"
										id="pic"
										name="pic"
										required
										type="file" />
								</div>
								<div>
									<label
										for="name"
										class="block mb-2 text-sm font-medium text-gray-900">
										Pesticide Name
									</label>
									<input
										type="text"
										name="name"
										id="name"
										class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-yellow-500 focus:border-yellow-500 block w-full p-2.5 placeholder-gray-400"
										placeholder=""
										required />
								</div>

								<div class="max-w-sm mx-auto">
									<label
										for="display"
										class="block mb-2 text-sm font-medium text-gray-900">
										Select an option
									</label>
									<select
										id="display"
										name="display"
										class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5">
										<option
											selected
											value="Fertilizer">
											Fertilizer
										</option>
										<option value="Pesticides">Pesticides</option>
									</select>
								</div>

								<div>
									<label
										for="message"
										class="block mb-2 text-sm font-medium text-gray-900">
										Description
									</label>
									<textarea
										id="message"
										name="description"
										rows="4"
										class="block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-orange-500 focus:border-orange-500"
										placeholder="Write your description here..."></textarea>
								</div>

								<label
									for="price"
									class="block mb-2 text-sm font-medium text-gray-900">
									Price
								</label>
								<div class="relative">
									<div class="absolute inset-y-0 start-0 top-0 flex items-center ps-3.5 pointer-events-none">
										<i class="fa-solid fa-peso-sign text-gray-500"></i>
									</div>
									<input
										type="text"
										id="price"
										name="price"
										class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-orange-500 focus:border-orange-500 block w-full ps-10 p-2.5"
										required />
								</div>

								<button
									type="submit"
									class="w-full text-white bg-yellow-700 hover:bg-yellow-800 focus:ring-4 focus:outline-none focus:ring-yellow-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center">
									Create Product
								</button>
							</form>
						</div>
					</div>
				</div>
			</div>
		</div>
		<script>
			document.getElementById("price").addEventListener("input", function (e) {
				let value = e.target.value;
				value = value.replace(/\D/g, ""); // Remove any non-digit characters
				value = value.replace(/\B(?=(\d{3})+(?!\d))/g, ","); // Add commas every 3 digits
				e.target.value = value;
			});
		</script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.3.0/flowbite.min.js"></script>
	</body>
</html>
